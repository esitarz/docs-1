<!DOCTYPE html>
<html lang="english">
  <head>
    <!-- ## for client-side less
    <link rel="stylesheet/less" type="text/css" href="../theme/css/style.less">
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
    -->
    <link rel="icon" type="image/vnd.microsoft.icon" href="../">
    <link rel="stylesheet" type="text/css" href="../theme/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="../theme/css/style.min.css">
    <link rel="stylesheet" type="text/css" href="../theme/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto+Mono">
    <link rel="stylesheet" type="text/css" href="../theme/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../theme/css/hatena-bookmark-icon.css">
      <link rel="stylesheet" type="text/css" href="theme/css/style.css">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="OrderCloud.io">
    <meta name="description" content="Posts and writings by OrderCloud.io">
<meta name="keywords" content="authentication">
    <title>
    OrderCloud Documentation Content
&ndash; Authentication: Impersonation    </title>
</head>
<body>
  <main>
    <header>
      <div class="site-name">
        <a href="..">OrderCloud Documentation Content</a>
      </div>
      <p>
          <a href="../archives.html"><i class="fa fa-archive"></i> Archive</a>
      </p>
    </header>
    <aside id="navmenuLeft" class="navmenu navmenu-default navmenu-fixed-left offcanvas-xs hidden-sm hidden-md hidden-lg">
      <nav>
        <header class="navmenu-text visible-xs">
          <h2>Documentation Nav</h2>
          
          <ul class="nav navmenu-nav">
              <li> <a href="C:\docs\content\pages\frameworks-and-sdks.md"> Frameworks And Sdks </a>
            </li>
              <li> <a href="C:\docs\content\pages\integration-services.md"> Integration Services </a>
            </li>
              <li> <a href="C:\docs\content\pages\platform-guides.md"> Platform Guides </a>
            </li>
        </ul>
      </nav>
    </header>
  </aside>
<article>
  <div class="article__title">
    <h1><a href="../platform-guides\authentication-impersonation.html">Authentication: Impersonation</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: Mon 19 March 2018</p>
 Tags:
      <a href="../tag/authentication.html">#authentication</a>    </p>
  </div>
  <div class="article__text">
    <h2>Overview</h2>
<p>In some instances, you may want to allow a user to order on behalf of another
user. We see this use case a lot in Customer Service Desk and Call Center
scenarios where customers will call their orders in and the service rep places
the order on the customer’s behalf. This workflow preserves the reporting
data, email notifications, and presents the catalog ordering rules the buyer
is configured for.</p>
<p>The OrderCloud.io API supports this capability by allowing certain users to
make API calls on behalf of a buyer user, which we refer to as impersonation.
If you're an admin user, with the <code>BuyerImpersonation</code> role you can
impersonate any buyer user under your organizational umbrella as long as an
applicable Impersonation Config has been created. If you're a buyer user with
the <code>BuyerImpersonation</code> role can impersonate any other buyer user within the
same buyer company as long as an applicable Impersonation Config has been
created.</p>
<h2>Creating an Impersonation Config</h2>
<p><code>ImpersonationBuyerID</code>, <code>ImpersonationGroupID</code>, and <code>ImpersonationUserID</code> all
reference the party you want to grant access to do the impersonating. While
<code>BuyerID</code>, <code>GroupID</code>, <code>UserID</code> all reference the party who will be
impersonated. The <code>SecurityProfileID</code> is the Security Profile you would like
to grant the user doing the impersonating (only while they are impersonating).
<code>ClientID</code> is the specific application impersonation will be allowed in, if
you need to impersonate in multiple applications, you’ll need to set up
multiple Impersonation Configs.</p>
<p>API reference: Create Impersonation Config</p>
<div class="highlight"><pre><span></span>POST POST https://api.ordercloud.io/v1/impersonationconfig HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json

{
  &quot;ID&quot;: &quot;…&quot;,
  &quot;ImpersonationBuyerID&quot;: &quot;…&quot;,
  &quot;ImpersonationGroupID&quot;: &quot;…&quot;,
  &quot;ImpersonationUserID&quot;: &quot;…&quot;,
  &quot;BuyerID&quot;: &quot;…&quot;,
  &quot;GroupID&quot;: &quot;…&quot;,
  &quot;UserID&quot;: &quot;…&quot;,
  &quot;SecurityProfileID&quot;: &quot;…&quot;,
  &quot;ClientID&quot;: &quot;…&quot;,
  &quot;BuyerID&quot;: &quot;…&quot;
}
</pre></div>


<h2>Retrieving the Access Token</h2>
<p>After you have successfully created an applicable Impersonation Config, the
next step is to retrieve that buyer user's Access Token by using the Users
<code>GetAccessToken</code> endpoint:</p>
<p>API reference: Get Access Token</p>
<div class="highlight"><pre><span></span>POST https://api.ordercloud.io/v1/buyers/{buyerID}/users/{userID}/accesstoken HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json

{
  &quot;ClientID&quot;: &quot;…&quot;,
  &quot;Roles&quot;: [
    &quot;DevCenterImpersonate&quot;
  ]
}
</pre></div>


<h2>Subsequent Requests</h2>
<p>The<code>access_token</code> from the response will need to be included for each and
every OrderCloud.io API request in the Authorization header prefaced by
<code>Bearer</code>:</p>
<div class="highlight"><pre><span></span>GET https://api.ordercloud.io/v1/buyers HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json
</pre></div>


<h2>Conclusion</h2>
<p>You should now have a basic understanding of how to impersonate a buyer user
on Ordercloud.io, and when you may need to use this functionality.</p>
  </div>

</article>
</main>
<footer>
  <p>THE END</p>
</footer>
</body>
</html>