<script src="localhost:8000/ace-build/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script><style>td.linenos {
    display: none;
}

pre {
    box-sizing: content-box;
    padding: 0;
    border-radius: 0;
}

.ace_gutter-cell {
    cursor: pointer;
}

.ace_layer {
    height: 100% !important;
}

.ace-chrome .ace_marker-layer .ace_selection {
    border-radius: 0;
}

span.o {
    display: block;
}</style><script>var ACE_EDITOR_SCROLL_TOP_MARGIN = 0;var ACE_EDITOR_THEME = 'chrome';var ACE_EDITOR_MAXLINES = 50;var ACE_EDITOR_READONLY = false;var ACE_EDITOR_AUTOSCROLL = true;var ACE_EDITOR_SHOW_INVISIBLE = true;var Range = ace.require("ace/range").Range;

var editor_array = {};

var correlationDic = {
    'bash': 'sh'
}

// inspiration : https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt#A_stricter_parse_function
filterInt = function (value) {
  if(/^(\-|\+)?([0-9]+|Infinity)$/.test(value))
    return Number(value);
  return NaN;
}

function linesInAnchor(anchor) {
  anchorObject = {};
  anchorObject.first = 0;
  anchorObject.last = 0;
  anchorObject.anchor = "";
  var firstLineIndex = anchor.indexOf("-L");
  var firstResult = anchor.substring(
    firstLineIndex + 2
  );
  if(filterInt(firstResult)) {
    anchorObject.first = filterInt(firstResult) - 1;
    anchorObject.last = anchorObject.first;
    anchorObject.anchor = anchor.substring(0, firstLineIndex + 2) + firstResult;
    return anchorObject;
  }
  var secondLineIndex = firstResult.indexOf("-L");

  if (!filterInt(firstResult.substring(0, secondLineIndex))) {
    return anchorObject;
  }
  anchorObject.anchor = anchor.substring(0, firstLineIndex + 2) + firstResult.substring(0, secondLineIndex);

  anchorObject.first = filterInt(firstResult.substring(0, secondLineIndex)) - 1;
  var secondResult = firstResult.substring(
    secondLineIndex + 2
  );
  if (!filterInt(secondResult)) {
    anchorObject.last = anchorObject.first;
    return anchorObject;
  }
  anchorObject.last = filterInt(secondResult) - 1;
  return anchorObject;
}

var selectionCallback = function (event, editor) {
    var editor_id = $(editor.container).attr('id');
    var range = editor.selection.getRange();
    location.hash = editor_id + '-L' + parseInt(range.start.row + 1);
    if ($(editor.container).data().hasOwnProperty("id")) {
        event.preventDefault();
    }
    else if (range.start.row != range.end.row) {
        location.hash += '-L' + parseInt(range.end.row + 1);
    }
    $(editor.container).removeData();
};

$(function() {
    var $pre_filter = $('pre.highlight');
    var pre_len = $pre_filter.length;
    $pre_filter.each(function(item) {
        var lang = $(this).find("code").attr('class').substring(9);
        if (lang in correlationDic) {
            lang = correlationDic[lang];
        }
        var one_render = true;
        var nb_of_lines = $(this).text().search('\n');
        // avoid the last carriage return
        $(this).text($(this).text().substring(0, $(this).text().length));

        // Give a unique id on all editor
        var editor_id = 'editor' + parseInt(item + 1);
        $(this).attr('id', editor_id);
        var editor = ace.edit(editor_id);
        editor_array[editor_id] = editor;
        editor.setTheme("ace/theme/" + ACE_EDITOR_THEME);
        editor.setShowInvisibles(ACE_EDITOR_SHOW_INVISIBLE);
        editor.setOptions({
            mode: "ace/mode/" + lang,
            maxLines: ACE_EDITOR_MAXLINES,
            readOnly: ACE_EDITOR_READONLY,
            autoScrollEditorIntoView: ACE_EDITOR_AUTOSCROLL
        });
        editor.$blockScrolling = Infinity;
        if (nb_of_lines === -1) {
            editor.renderer.setShowGutter(false);
        }

        editor.renderer.on("afterRender", function(event) {
            var anchor = linesInAnchor(location.hash);
            var hash_editor = location.hash.substring(1, location.hash.indexOf("-"));
            var line = $($(editor.container).find(".ace_gutter-cell")[parseInt(editor_id.substring(6))]);
            if (hash_editor == editor_id && one_render) {
                var offset = line.offset();
                if (offset) {
                    $(document).scrollTop(offset.top - ACE_EDITOR_SCROLL_TOP_MARGIN);
                    editor.selection.setRange(new Range(
                        anchor.first, 0, anchor.last,  Number.MAX_VALUE)
                    );
                    one_render = false;
                }
            }
        });

        editor.resize(true);
        editor.selection.on("changeSelection", function(event) {
            selectionCallback(event, editor);
        });
    });

    $(".ace_gutter-cell").on("click", function(event) {
        var editor_id = $(this).closest('pre.ace_editor').attr('id');
        var editor = editor_array[editor_id];
        var line = parseInt($(this).text()) - 1;
        editor.selection.setRange(new Range(line, 0, line, Number.MAX_VALUE));
        $(this).closest('.ace_editor').data({'id': parseInt($(this).text())});
        selectionCallback(event, editor);
    });
});</script>
<!DOCTYPE html>
<html lang="english">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../theme/stylesheet/style.css">
  <link rel="stylesheet" type="text/css" href="../theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="../theme/font-awesome/css/font-awesome.min.css">
    <link href="../pelican-plugins/ace_editor/static/style.css" rel="stylesheet">
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />
<meta name="author" content="OrderCloud.io" />
<meta name="description" content="Overview In some instances, you may want to allow a user to order on behalf of another user. We see this use case a lot in Customer Service Desk and Call Center scenarios where customers will call their orders in and the service rep places the order on the customer …" />
<meta name="keywords" content="authentication">
<meta property="og:site_name" content="OrderCloud Documentation Content"/>
<meta property="og:title" content="Authentication: Impersonation"/>
<meta property="og:description" content="Overview In some instances, you may want to allow a user to order on behalf of another user. We see this use case a lot in Customer Service Desk and Call Center scenarios where customers will call their orders in and the service rep places the order on the customer …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../platform-guides\authentication-impersonation.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-03-19 15:32:44.250255-05:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="../author/ordercloudio.html">
<meta property="article:section" content="Platform Guides"/>
<meta property="article:tag" content="authentication"/>
<meta property="og:image" content="/images/svg/ordercloudio_horizontal_logo.svg">
  <title>OrderCloud Documentation Content &ndash; Authentication: Impersonation</title>
</head>
<body>
  <aside>
    <div>
      <a href="..">
          <img src="/images/svg/ordercloudio_horizontal_logo.svg" alt="OrderCloud Docs" title="OrderCloud Docs">
      </a>
      <h1><a href="..">OrderCloud Docs</a></h1>
      
      <nav>
          <ul class="list">
              <li><a href="../category/api-reference.html">API Reference</a> (41)</li>
              <li><a href="../category/frameworks-and-sdks.html">Frameworks And Sdks</a> (5)</li>
              <li><a href="../category/integration-services.html">Integration Services</a> (14)</li>
              <li><a href="../category/platform-guides.html">Platform Guides</a> (20)</li>
          </ul>
      </nav>
    </aside>
  </div>
  <main>
<article class="single">
  <header>
    <h1 id="authentication-impersonation">Authentication: Impersonation</h1>
    <p>
        Posted on Mon 19 March 2018 in <a href="../category/platform-guides.html">Platform Guides</a>


    </p>
  </header>


  <div>
    <h2>Overview</h2>
<p>In some instances, you may want to allow a user to order on behalf of another
user. We see this use case a lot in Customer Service Desk and Call Center
scenarios where customers will call their orders in and the service rep places
the order on the customer’s behalf. This workflow preserves the reporting
data, email notifications, and presents the catalog ordering rules the buyer
is configured for.</p>
<p>The OrderCloud.io API supports this capability by allowing certain users to
make API calls on behalf of a buyer user, which we refer to as impersonation.
If you're an admin user, with the <code>BuyerImpersonation</code> role you can
impersonate any buyer user under your organizational umbrella as long as an
applicable Impersonation Config has been created. If you're a buyer user with
the <code>BuyerImpersonation</code> role can impersonate any other buyer user within the
same buyer company as long as an applicable Impersonation Config has been
created.</p>
<h2>Creating an Impersonation Config</h2>
<p><code>ImpersonationBuyerID</code>, <code>ImpersonationGroupID</code>, and <code>ImpersonationUserID</code> all
reference the party you want to grant access to do the impersonating. While
<code>BuyerID</code>, <code>GroupID</code>, <code>UserID</code> all reference the party who will be
impersonated. The <code>SecurityProfileID</code> is the Security Profile you would like
to grant the user doing the impersonating (only while they are impersonating).
<code>ClientID</code> is the specific application impersonation will be allowed in, if
you need to impersonate in multiple applications, you’ll need to set up
multiple Impersonation Configs.</p>
<p>API reference: Create Impersonation Config</p>
<pre><code>POST POST https://api.ordercloud.io/v1/impersonationconfig HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json

{
  "ID": "…",
  "ImpersonationBuyerID": "…",
  "ImpersonationGroupID": "…",
  "ImpersonationUserID": "…",
  "BuyerID": "…",
  "GroupID": "…",
  "UserID": "…",
  "SecurityProfileID": "…",
  "ClientID": "…",
  "BuyerID": "…"
}
</code></pre>
<h2>Retrieving the Access Token</h2>
<p>After you have successfully created an applicable Impersonation Config, the
next step is to retrieve that buyer user's Access Token by using the Users
<code>GetAccessToken</code> endpoint:</p>
<p>API reference: Get Access Token</p>
<pre><code>POST https://api.ordercloud.io/v1/buyers/{buyerID}/users/{userID}/accesstoken HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json

{
  "ClientID": "…",
  "Roles": [
    "DevCenterImpersonate"
  ]
}
</code></pre>
<h2>Subsequent Requests</h2>
<p>The<code>access_token</code> from the response will need to be included for each and
every OrderCloud.io API request in the Authorization header prefaced by
<code>Bearer</code>:</p>
<pre><code>GET https://api.ordercloud.io/v1/buyers HTTP/1.1
Authentication: Bearer put_access_token_here
Content-Type: application/json
</code></pre>
<h2>Conclusion</h2>
<p>You should now have a basic understanding of how to impersonate a buyer user
on Ordercloud.io, and when you may need to use this functionality.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="../tag/authentication.html">authentication</a>
    </p>
  </div>




</article>
    <footer>
<p>&copy; OrderCloud.io </p>
<p>  Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " OrderCloud Documentation Content ",
  "url" : "..",
  "image": "/images/svg/ordercloudio_horizontal_logo.svg",
  "description": ""
}
</script></body>
</html>